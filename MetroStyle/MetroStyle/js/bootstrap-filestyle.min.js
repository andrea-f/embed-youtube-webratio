!function(t){"use strict";var e=function(e,s){this.options=s,this.$elementFilestyle=[],this.$element=t(e)};e.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val("")},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val(""),this.$elementFilestyle.remove()},icon:function(t){if(t===!0)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(t!==!1)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find("i").remove())}},input:function(t){if(t===!0){if(!this.options.input){this.options.input=!0,this.$elementFilestyle.prepend(this.htmlInput());var e="",s=[];void 0===this.$element[0].files?s[0]={name:this.$element[0].value}:s=this.$element[0].files;for(var n=0;n<s.length;n++)e+=s[n].name.split("\\").pop()+", ";""!==e&&this.$elementFilestyle.find(":text").val(e.replace(/\, $/g,""))}}else{if(t!==!1)return this.options.input;this.options.input&&(this.options.input=!1,this.$elementFilestyle.find(":text").remove())}},buttonText:function(t){return void 0===t?this.options.buttonText:(this.options.buttonText=t,this.$elementFilestyle.find("label span").html(this.options.buttonText),void 0)},classButton:function(t){return void 0===t?this.options.classButton:(this.options.classButton=t,this.$elementFilestyle.find("label").attr({"class":this.options.classButton}),-1!==this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)?this.$elementFilestyle.find("label span").addClass("icon-white"):this.$elementFilestyle.find("label span").removeClass("icon-white"),void 0)},classIcon:function(t){return void 0===t?this.options.classIcon:(this.options.classIcon=t,-1!==this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)?this.$elementFilestyle.find("label").find("span").attr({"class":"icon-white "+this.options.classIcon}):this.$elementFilestyle.find("label").find("span").attr({"class":this.options.classIcon}),void 0)},classInput:function(t){return void 0===t?this.options.classInput:(this.options.classInput=t,this.$elementFilestyle.find(":text").addClass(this.options.classInput),void 0)},htmlIcon:function(){if(this.options.icon){var t="";return-1!==this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)&&(t=" icon-white "),'<span class="'+t+this.options.classIcon+'"></span> '}return""},htmlInput:function(){return this.options.input?'<input type="text" class="'+this.options.classInput+'" disabled> ':""},constructor:function(){var e=this,s="",n=this.$element.attr("id"),i=[];""!==n&&n||(n="filestyle-"+t(".bootstrap-filestyle").length,this.$element.attr({id:n}));var l=""!=this.options.classInputContainerClass?'<div class="'+this.options.classInputContainerClass+'">':"",o=""!=l?"</div>":"",a=""!=this.options.classButtonContainerClass?'<div class="'+this.options.classButtonContainerClass+'">':"",c=""!=a?"</div>":"";s=this.options.buttonBefore?a+'<label for="'+n+'" class="'+this.options.classButton+'">'+this.htmlIcon()+" "+this.options.buttonText+"</label>"+c+l+this.htmlInput()+o:l+this.htmlInput()+o+a+'<label for="'+n+'" class="'+this.options.classButton+'">'+this.htmlIcon()+" "+this.options.buttonText+"</label>"+c,this.$elementFilestyle=t('<div class="'+this.options.containerClass+' bootstrap-filestyle">'+s+"</div>");var r=t('[id="'+n+'_preload"]').val(),p=this.$element.nextAll();(r||p.length)&&(r&&this.$elementFilestyle.find(":text").val(r.split("\\").pop().split("/").pop().split("?").shift().replace(/\, $/g,"")),this.$elementFilestyle[this.options.buttonBefore?"prepend":"append"](p),this.$elementFilestyle.addClass("preloaded"));var h=this.$elementFilestyle.find("label"),u=h.parent();u.attr("tabindex","0").keypress(function(t){(13===t.keyCode||32===t.charCode)&&h.click()}),this.$element.css({position:"absolute",clip:"rect(0,0,0,0)"}).attr("tabindex","-1").after(this.$elementFilestyle),this.$element.change(function(){var t="";void 0===this.files?i[0]={name:this.value}:i=this.files;for(var s=0;s<i.length;s++)t+=i[s].name.split("\\").pop()+", ";""!==t?e.$elementFilestyle.find(":text").val(t.replace(/\, $/g,"")):e.$elementFilestyle.find(":text").val("")}),window.navigator.userAgent.search(/firefox/i)>-1&&this.$elementFilestyle.find("label").click(function(){return e.$element.click(),!1})}};var s=t.fn.filestyle;t.fn.filestyle=function(s,n){var i="",l=this.each(function(){if("file"===t(this).attr("type")){var l=t(this),o=l.data("filestyle"),a=t.extend({},t.fn.filestyle.defaults,s,"object"==typeof s&&s);o||(l.data("filestyle",o=new e(this,a)),o.constructor()),"string"==typeof s&&(i=o[s](n))}});return void 0!==typeof i?i:l},t.fn.filestyle.defaults={buttonText:"Choose file",input:!0,icon:!0,buttonBefore:!1,containerClass:"input-group",classButtonContainerClass:"input-group-btn",classButton:"btn btn-default btn-choose",classInputContainerClass:"",classInput:"form-control",classIcon:"glyphicon glyphicon-folder-open"},t.fn.filestyle.noConflict=function(){return t.fn.filestyle=s,this},t(".filestyle").each(function(){var e=t(this),s={buttonText:e.attr("data-buttonText"),input:"false"===e.attr("data-input")?!1:!0,icon:"false"===e.attr("data-icon")?!1:!0,classButton:e.attr("data-classButton"),classInput:e.attr("data-classInput"),classIcon:e.attr("data-classIcon")};e.filestyle(s)})}(window.jQuery);